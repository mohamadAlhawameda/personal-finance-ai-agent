{
  "name": "CHAT",
  "nodes": [
    {
      "parameters": {
        "public": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.1,
      "position": [
        720,
        1104
      ],
      "id": "8bf866bf-6080-437b-86d8-064429729c59",
      "name": "When chat message received",
      "webhookId": "e6251d43-c9e8-4405-9b22-ebab16e8e78d"
    },
    {
      "parameters": {
        "modelName": "models/embedding-001"
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsGoogleGemini",
      "typeVersion": 1,
      "position": [
        1184,
        1744
      ],
      "id": "636d7ce1-94b9-4d99-ac8e-b0c69b3d6e1c",
      "name": "Embeddings Google Gemini1",
      "credentials": {
        "googlePalmApi": {
          "id": "94nFxKYo5AOWkvFr",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "You are HomeBudget Buddy — a private, plain-language budgeting assistant for household expenses. Be concise (max 4 short lines). Use memory and the vector store when helpful. Show simple math for comparisons, e.g., \"$320 vs $250 → +$70 (+28%).\" Use only information the user provided or retrieved. If data is missing, say exactly what you need (e.g., \"add 2–3 grocery entries first\"). Do not request bank logins. Keep tone friendly and family-safe."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.1,
      "position": [
        1008,
        1104
      ],
      "id": "841243ae-d53b-45ed-ab5e-b4de2db9128a",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        944,
        1328
      ],
      "id": "e8c27d1a-e841-4cd6-a405-95ce8cc81a3c",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "94nFxKYo5AOWkvFr",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        1072,
        1328
      ],
      "id": "61552670-8e56-46b3-9860-a5610d5b4335",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "name": "budget_library",
        "description": "Retrieve budgeting notes & spending docs"
      },
      "id": "7e2dd206-882f-4cd6-a055-d29e59f32dfa",
      "name": "Vector Store Tool1",
      "type": "@n8n/n8n-nodes-langchain.toolVectorStore",
      "position": [
        1200,
        1328
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash-exp",
        "options": {}
      },
      "id": "d2123b5c-708f-4636-b64b-e31ab040f0a2",
      "name": "Google Gemini Chat Model (retrieval)1",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "position": [
        1392,
        1536
      ],
      "typeVersion": 1,
      "credentials": {
        "googlePalmApi": {
          "id": "94nFxKYo5AOWkvFr",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePGVector",
      "typeVersion": 1.3,
      "position": [
        1104,
        1536
      ],
      "id": "7443e081-a338-4a4e-830c-b3905281a818",
      "name": "Postgres PGVector Store1",
      "credentials": {
        "postgres": {
          "id": "wESXMfXkWn84QHOn",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "content": "## HomeBudget Buddy — Chat\nMinimal, privacy-first budgeting assistant.\n\nUse: Ask things like \"Why were groceries higher this month?\" or \"What did I spend on utilities?\" The agent keeps a short memory and uses the Vector Store Tool (budget_library) to retrieve tips and your uploaded spending notes.\n\nPrinciples: useful • understandable • minimal.",
        "height": 848,
        "width": 1088
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        560,
        1040
      ],
      "id": "ef5c7a57-af9d-4244-9e39-da6b45f2ff7e",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "content": "# How this chat works (RAG)\n1) Chat message → AI Agent decides whether to answer directly or retrieve.\n2) If needed, Vector Store Tool searches Postgres pgvector (your uploaded PDFs).\n3) Gemini (retrieval) synthesizes a concise, plain-language answer with simple math.\n\nTip: Keep PDFs short and specific (monthly spending summaries, category notes).",
        "height": 1600,
        "width": 1168,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2064,
        1168
      ],
      "typeVersion": 1,
      "id": "599a12fb-894d-4567-9bbc-b85e08ddb188",
      "name": "Sticky Note"
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings Google Gemini1": {
      "ai_embedding": [
        [
          {
            "node": "Postgres PGVector Store1",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Vector Store Tool1": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model (retrieval)1": {
      "ai_languageModel": [
        [
          {
            "node": "Vector Store Tool1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Postgres PGVector Store1": {
      "ai_vectorStore": [
        [
          {
            "node": "Vector Store Tool1",
            "type": "ai_vectorStore",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "92e7837f-16cd-4b18-b9cc-ac51bcb2e786",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "98725356255949fdc1f5a9c519bdf3f296bcfe9d757637e3b4d644300ec8aa8b"
  },
  "id": "QVWvGkqu3bo48zMw",
  "tags": []
}
