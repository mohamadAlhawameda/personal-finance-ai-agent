{
  "name": "INGESTION",
  "nodes": [
    {
      "parameters": {
        "formTitle": "HomeBudget Buddy — Ingestion",
        "formDescription": "Upload a short PDF with monthly spending notes or category totals.",
        "formFields": {
          "values": [
            {
              "fieldLabel": "data",
              "fieldType": "file",
              "acceptFileTypes": ".pdf"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.formTrigger",
      "typeVersion": 2.2,
      "position": [
        -240,
        -16
      ],
      "id": "c48d685d-ed65-4a61-b497-89de30e203bb",
      "name": "On form submission",
      "webhookId": "70128154-1a66-43e1-b762-b95e7fb0acbd"
    },
    {
      "parameters": {
        "operation": "pdf",
        "options": {}
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1,
      "position": [
        -16,
        -16
      ],
      "id": "d309927c-1155-41a3-8201-fa9229b219ef",
      "name": "Extract from File"
    },
    {
      "parameters": {
        "mode": "insert",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePGVector",
      "typeVersion": 1.3,
      "position": [
        208,
        -16
      ],
      "id": "7723610b-1539-443f-a6ff-4fac5369c1a7",
      "name": "Postgres PGVector Store",
      "credentials": {
        "postgres": {
          "id": "wESXMfXkWn84QHOn",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1.1,
      "position": [
        368,
        208
      ],
      "id": "c3ff438d-ff44-4e60-a02a-dbe3a6157ac6",
      "name": "Default Data Loader"
    },
    {
      "parameters": {
        "modelName": "models/embedding-001"
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsGoogleGemini",
      "typeVersion": 1,
      "position": [
        112,
        208
      ],
      "id": "a4cfc6a9-d7f1-4172-88d2-c64b5574947c",
      "name": "Embeddings Google Gemini",
      "credentials": {
        "googlePalmApi": {
          "id": "94nFxKYo5AOWkvFr",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "content": "## HomeBudget Buddy — Ingestion\nUpload **short, focused** PDFs (e.g., a monthly spending summary). Keeping documents concise improves retrieval quality.",
        "height": 848,
        "width": 1392
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -480,
        -240
      ],
      "typeVersion": 1,
      "id": "3c5f3c95-ab8c-4ee2-9120-88c8a5c98051",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "---\n# What this workflow does\n1) Extracts text from your uploaded PDF.\n2) Chunks it into small sections.\n3) Creates embeddings with Gemini.\n4) Inserts them into Postgres pgvector so the chat can retrieve budgeting tips and your spending notes.",
        "height": 1184,
        "width": 1600,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        960,
        -240
      ],
      "typeVersion": 1,
      "id": "6b4133fb-ac96-4f27-801f-83932be30c29",
      "name": "Sticky Note1"
    }
  ],
  "pinData": {},
  "connections": {
    "On form submission": {
      "main": [
        [
          {
            "node": "Extract from File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract from File": {
      "main": [
        [
          {
            "node": "Postgres PGVector Store",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader": {
      "ai_document": [
        [
          {
            "node": "Postgres PGVector Store",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings Google Gemini": {
      "ai_embedding": [
        [
          {
            "node": "Postgres PGVector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "2e4bc235-e545-4c45-859b-342b84e6ee3d",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "98725356255949fdc1f5a9c519bdf3f296bcfe9d757637e3b4d644300ec8aa8b"
  },
  "id": "RmsuDA178tpoYQ6E",
  "tags": []
}
